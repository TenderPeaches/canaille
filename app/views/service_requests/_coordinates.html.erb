<%# coordinate %>
<%= content_tag :div, class: "form__section" do %>
    <%# if client exists %>
    <% if current_user && current_user&.client %>
        <%= content_tag :div, class: "form__group" do %>
            <%= link_to t('models.service_request.use_client_address'), use_client_address_service_requests_path, class: "button", data: { turbo_stream: true } %>
            <%= link_to t('models.service_request.use_unique_address'), use_unique_address_service_requests_path, class: "button", data: { turbo_stream: true } %>
        <% end %>
    <% end %>
    <%= turbo_frame_tag "service-request-coordinate" do %>
        <% if @service_request.coordinate %>
            <% coordinate = @service_request.coordinate %>
        <% elsif @service_request.client&.coordinate %>
            <% coordinate = @service_request.client.coordinate %>
        <% else %>
            <% coordinate = Coordinate.new %>
        <% end %>
        <% if coordinate %>
            <%= form.fields_for coordinate do |coordinate_form| %>
                <%= render partial: "coordinates/fields", locals: { form: coordinate_form } %>
            <% end %>
        <% end %>
    <% end %>
<% end %>