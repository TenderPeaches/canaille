<%= turbo_frame_tag @service_request do %>
    <%= form_with model: @service_request do |form| %>
        <% if @service_request.errors.any? %>
            <div class="error_messages">
                <h2>Form is invalid</h2>
                <ul>
                    <% @service_request.errors.full_messages.each do |message| %>
                        <li><%= message %></li>
                    <% end %>
                </ul>
            </div>
        <% end %>

        <%= turbo_frame_tag "service-request-fields" do %>
            <%= content_tag :div, class: "service-request-fields" do %>
                <%= content_tag :div, class: "field field--service" do %>
                    <%= render partial: "services/form_picker", locals: { service: @service_request.service, form: form } %>
                <% end %>
                <%# submit button %>
                <%= content_tag :div, class: "actions" do %>
                    <%= form.submit t('models.register') %>
                <% end %>
            <% end %>
        <% end %>
    <% end %>
<% end %>